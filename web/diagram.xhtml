<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC
    "-//W3C//DTD XHTML 1.1 plus MathML 2.0 plus SVG 1.1//EN"
    "http://www.w3.org/2002/04/xhtml-math-svg/xhtml-math-svg.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Diagram</title>
    <script type="application/javascript" src="jquery_min.js">
    </script>
    <script type="application/javascript" src="graph.js">
    </script>
    <script type="application/javascript">
      function start()
      {
      var canvas = $('#graph_canvas').get(0);
      var tc = new TimeCanvas(canvas,500,300);
      var b = new NumericGraphBlock();
      //tc.addBlock(b);
      //b.build_block(-1,5,[-2,1,0.4,4, 0.7, 8,1.5,0, 4,-3]);
      tb = new TimeGraphBlock(canvas);
      console.log(canvas.height);
      tb.setYPos(canvas.getBBox().height - 60);
      tb.setBlockHeight(60);
      tc.addBlock(tb);


      var now = new Date();
      var length =60000;
      tc.setDisplayLength(length);
      tc.setBlockLength(length * 3);;
      tc.moveTo(now.getTime());

      step = new StepCanvas(tc, tb);
      function update() 
      {
      var now = new Date();
      tc.moveTo(now.getTime(),0);
      setTimeout(update, 500);
      }
     // update();
      }
    </script>
  </head>
  <body onload="start();">
    <h1>Diagram</h1>
    <div>
      <svg:svg       xmlns:svg="http://www.w3.org/2000/svg"
		     xmlns:xlink="http://www.w3.org/1999/xlink"
		     width="600"
		     height="350"
		     id="svg2"
		     version="1.1">
	<svg:clipPath id="canvas_clip">
	  <svg:rect 
	      width="500"
	      height="300"
	      x="0"
	      y="0" />
	</svg:clipPath>
	<svg:g id="graph_canvas" transform="translate(20,1)"
	       clip-path="url(#canvas_clip)">
	  <svg:rect
	      style="fill:#e0ffe0;stroke:#000000;stroke-width:1"
	      id="rect2985"
	      width="500"
	      height="300"
	      x="0"
	      y="0" />
	  <svg:polyline fill="none" stroke="#000000" stroke-width="1" points="10,10 20,10 30,0 40,78 50,26, 60,73"/>
	</svg:g>
      </svg:svg>
    </div>
    <div id="step0"><div onclick="step.backward(0);">&lt;</div>
    <div onclick="step.forward(0);">&gt;</div></div>
    <div id="step1"><div onclick="step.backward(1);">&lt;&lt;</div>
    <div onclick="step.forward(1);">&gt;&gt;</div></div>
    <div id="step2"><div onclick="step.backward(2);">&lt;&lt;&lt;</div>
    <div onclick="step.forward(2);">&gt;&gt;&gt;</div></div>
  </body>
</html>
